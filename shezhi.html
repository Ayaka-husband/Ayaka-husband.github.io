<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>æ¸©æŸ”æé†’ï¼ˆPythonä¸HTMLé€»è¾‘åˆå¹¶ç‰ˆï¼‰</title>
    <style>
        /* åŸºç¡€æ ·å¼é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "å¾®è½¯é›…é»‘", sans-serif;
        }
        body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: #fff;
        }

        /* å¯åŠ¨é¡µæ ·å¼ */
        .start-page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }
        .title {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        .gift {
            font-size: 40px;
            margin-right: 15px;
        }
        .main-title {
            font-size: 24px;
            font-weight: bold;
            color: #4a6fa5;
        }
        .sub-title {
            font-size: 16px;
            color: #666;
            margin-bottom: 50px;
        }
        .start-btn {
            width: 200px;
            height: 50px;
            font-size: 18px;
            color: #4a6fa5;
            background: white;
            border: 2px solid #4a6fa5;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }

        /* ç¥ç¦çª—å£å®¹å™¨ */
        .tips-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
        }
        .tip-window {
            position: absolute;
            width: 60vw; /* ä¸JSä¸­windowWidthå¯¹åº”ï¼Œç¼©ä¸ºå±å¹•60% */
            max-width: 250px;
            height: 100px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.6s;
            box-shadow: 0 3px 10px rgba(0,0,0,0.15); /* åŠ æ·±é˜´å½±ï¼ŒåŒºåˆ†çª—å£å±‚æ¬¡ */
            border: 1px solid rgba(255,255,255,0.8); /* åŠ ç™½è‰²è¾¹æ¡†ï¼Œå¢å¼ºè¾¹ç•Œæ„Ÿ */
        }
        .tip-text {
            font-size: 15px; /* æ–‡å­—å†ç¼©å°1pxï¼Œé¿å…æ¢è¡Œæ‹¥æŒ¤ */
            color: #333;
            text-align: center;
            padding: 0 12px;
        }

        /* ç»“æŸé¡µæ ·å¼ */
        .final-page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 200;
        }
        .final-text {
            font-size: 22px;
            font-weight: bold;
            background: lightpink;
            padding: 15px 30px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .exit-btn {
            width: 120px;
            height: 40px;
            font-size: 14px;
            background: #4a6fa5;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
        }

        /* æ‰‹æœºé€‚é… */
        @media (max-width: 768px) {
            .tip-window {
                width: 80vw;
                height: 120px;
            }
            .main-title {
                font-size: 20px;
            }
            .final-text {
                font-size: 18px;
                padding: 12px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- å¯åŠ¨é¡µï¼šå¯¹åº”Pythonä¸­çš„create_start_windowå‡½æ•° -->
    <div class="start-page" id="startPage">
        <div class="title">
            <span class="gift">ğŸ</span>
            <span class="main-title">ä½ æ”¶åˆ°äº†ä¸€ä»½æ¸©æŸ”æé†’</span>
        </div>
        <span class="sub-title">æœ‹å‹ä¸ºä½ å‡†å¤‡äº†ä¸€äº›æ¸©æš–çš„è¯è¯­</span>
        <button class="start-btn" id="startBtn">å¼€å§‹ä½“éªŒ</button>
    </div>

    <!-- ç¥ç¦çª—å£å®¹å™¨ï¼šå¯¹åº”Pythonä¸­åŠ¨æ€åˆ›å»ºçš„Toplevelçª—å£å®¹å™¨ -->
    <div class="tips-container" id="tipsContainer"></div>

    <!-- ç»“æŸé¡µï¼šå¯¹åº”Pythonä¸­çš„create_final_windowå‡½æ•° -->
    <div class="final-page" id="finalPage">
        <div class="final-text">è°¢è°¢è§‚çœ‹æˆ‘çš„å¥½æœ‹å‹</div>
        <button class="exit-btn" id="exitBtn">é€€å‡º</button>
    </div>

    <script>
        // ===== å¯¹åº”Pythonä¸­çš„å˜é‡å®šä¹‰ =====
        // è·å–é¡µé¢å…ƒç´ ï¼ˆç±»ä¼¼Pythonä¸­çš„tkinterç»„ä»¶å¯¹è±¡ï¼‰
        const startPage = document.getElementById('startPage');
        const startBtn = document.getElementById('startBtn');
        const tipsContainer = document.getElementById('tipsContainer');
        const finalPage = document.getElementById('finalPage');
        const exitBtn = document.getElementById('exitBtn');

        // ç¥ç¦è¯­å¥åˆ—è¡¨ï¼ˆä¸Pythonä¸­çš„tipsåˆ—è¡¨å®Œå…¨ä¸€è‡´ï¼‰
        const tips = [
            'å¤šå–æ°´å“¦ï½', 'ä¿æŒå¾®ç¬‘å‘€', 'æ¯å¤©éƒ½è¦å…ƒæ°”æ»¡æ»¡', 'ä¿æŒå¥½å¿ƒæƒ…', 'å¥½å¥½çˆ±è‡ªå·±',
            'æ¢¦æƒ³æˆçœŸ', 'é¡ºé¡ºåˆ©åˆ©', 'æ—©ç‚¹ä¼‘æ¯', 'æ„¿æ‰€æœ‰çƒ¦æ¼éƒ½æ¶ˆå¤±', 'åˆ«ç†¬å¤œ',
            'ä»Šå¤©è¿‡å¾—å¼€å¿ƒå˜›', 'å¤©å†·äº†ï¼Œå¤šç©¿è¡£æœ', 'æ–°çš„ä¸€å¤©ä¹Ÿè¦é—ªé—ªå‘å…‰å‘€', 'ç´¯äº†å°±åœä¸‹æ¥æ­‡ä¸€æ­‡',
            'ä½ çš„åŠªåŠ›è¶…æ£’çš„', 'è®°å¾—ç»™ç”Ÿæ´»åŠ ç‚¹ç”œ', 'è„šæ­¥æ…¢ä¸€ç‚¹ä¹Ÿæ²¡å…³ç³»', 'åƒé˜³å…‰ä¸€æ ·ç¿çƒ‚å§',
            'å°æ—¥å­ä¼šè¶Šæ¥è¶Šé¡ºçš„', 'ç…§é¡¾å¥½è‡ªå·±å‘€'
        ];
        // èƒŒæ™¯è‰²åˆ—è¡¨ï¼ˆä¸Pythonä¸­çš„bg_colorsåˆ—è¡¨å®Œå…¨ä¸€è‡´ï¼‰
        const bgColors = [
            'lightpink', 'skyblue', 'lightgreen', 'lavender', 'lightyellow', 'plum',
            'coral', 'bisque', 'aquamarine', 'mistyrose', 'honeydew', 'lavenderblush', 'oldlace'
        ];

        // ===== å¯¹åº”Pythonä¸­çš„äº‹ä»¶ç»‘å®š =====
        // å¼€å§‹æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼ˆå¯¹åº”Pythonä¸­start_btnçš„commandå‚æ•°ï¼‰
        startBtn.addEventListener('click', () => {
            startPage.style.display = 'none'; // éšè—å¯åŠ¨é¡µï¼ˆå¯¹åº”Pythonä¸­start_window.destroy()ï¼‰
            createTipWindows(); // åˆ›å»ºç¥ç¦çª—å£
        });

        // é€€å‡ºæŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼ˆå¯¹åº”Pythonä¸­exitæŒ‰é’®çš„commandå‚æ•°ï¼‰
        exitBtn.addEventListener('click', () => {
            if (window.WeixinJSBridge) WeixinJSBridge.call('closeWindow'); // å¾®ä¿¡ä¸­å…³é—­çª—å£
            else location.reload(); // å…¶ä»–æµè§ˆå™¨åˆ·æ–°é‡ç½®
        });

        // ===== æ ¸å¿ƒé€»è¾‘å‡½æ•°ï¼ˆä¸Pythonå‡½æ•°ä¸€ä¸€å¯¹åº”ï¼‰ =====
        /**
         * åˆ›å»ºæ‰€æœ‰ç¥ç¦çª—å£
         * å¯¹åº”Pythonä¸­çš„create_tip_windowå‡½æ•° + start_experienceä¸­çš„å¾ªç¯åˆ›å»ºé€»è¾‘
         */
        function createTipWindows() {
    // 1. é€‚é…æ‰‹æœºçš„å‚æ•°è®¾ç½®ï¼ˆå‡å°‘æ•°é‡+ç¼©å°å°ºå¯¸ï¼‰
    const windowCount = 15; // è¿›ä¸€æ­¥å‡å°‘åˆ°15ä¸ªï¼ˆæ‰‹æœºå±å¹•æé™é€‚é…ï¼‰
    const screenWidth = window.innerWidth;
    const screenHeight = window.innerHeight;
    const windowWidth = Math.min(screenWidth * 0.6, 250); // çª—å£å®½åº¦ç¼©ä¸ºå±å¹•60%ï¼ˆæœ€å¤§250pxï¼‰
    const windowHeight = 100; // çª—å£é«˜åº¦ç¼©å°
    const gap = 20; // çª—å£ä¹‹é—´çš„æœ€å°é—´è·ï¼ˆ20pxï¼Œé¿å…è´´è¾¹æ‹¥æŒ¤ï¼‰
    tipsContainer.innerHTML = '';
    const existingWindows = []; // å­˜å‚¨å·²åˆ›å»ºçª—å£çš„ä½ç½®ä¿¡æ¯ï¼Œç”¨äºé˜²é‡å æ£€æŸ¥

    // 2. å¾ªç¯åˆ›å»ºçª—å£ï¼ˆå¸¦é˜²é‡å æ£€æŸ¥ï¼‰
    for (let i = 0; i < windowCount; ) { // ä¸è‡ªåŠ¨i++ï¼Œç¡®ä¿åˆ›å»ºæˆåŠŸæ‰è®¡æ•°
        // 2.1 éšæœºç”Ÿæˆåˆå§‹ä½ç½®ï¼ˆé¿å¼€å±å¹•è¾¹ç¼˜ï¼‰
        const maxLeft = screenWidth - windowWidth - gap * 2;
        const maxTop = screenHeight - windowHeight - gap * 2;
        const newLeft = gap + Math.random() * maxLeft;
        const newTop = gap + Math.random() * maxTop;

        // 2.2 æ£€æŸ¥æ–°çª—å£æ˜¯å¦ä¸å·²å­˜åœ¨çª—å£é‡å 
        let isOverlap = false;
        for (const win of existingWindows) {
            // è®¡ç®—ä¸¤ä¸ªçª—å£çš„é—´è·ï¼ˆå·¦å³ã€ä¸Šä¸‹ï¼‰
            const leftDiff = Math.abs(newLeft - win.left);
            const topDiff = Math.abs(newTop - win.top);
            // è‹¥é—´è·å°äºâ€œçª—å£å°ºå¯¸+æœ€å°é—´è·â€ï¼Œåˆ¤å®šä¸ºé‡å 
            if (leftDiff < windowWidth + gap && topDiff < windowHeight + gap) {
                isOverlap = true;
                break; // é‡å åˆ™è·³å‡ºå¾ªç¯ï¼Œé‡æ–°ç”Ÿæˆä½ç½®
            }
        }

        // 2.3 è‹¥ä¸é‡å ï¼Œåˆ›å»ºçª—å£å¹¶è®°å½•ä½ç½®
        if (!isOverlap) {
            // éšæœºé€‰æ‹©æ–‡å­—å’ŒèƒŒæ™¯è‰²
            const tipText = tips[Math.floor(Math.random() * tips.length)];
            const bgColor = bgColors[Math.floor(Math.random() * bgColors.length)];

            // åˆ›å»ºçª—å£å…ƒç´ 
            const tipWindow = document.createElement('div');
            tipWindow.className = 'tip-window';
            tipWindow.style.left = `${newLeft}px`;
            tipWindow.style.top = `${newTop}px`;
            tipWindow.style.width = `${windowWidth}px`;
            tipWindow.style.height = `${windowHeight}px`;
            tipWindow.style.backgroundColor = bgColor;
            tipWindow.innerHTML = `<span class="tip-text">${tipText}</span>`;
            tipsContainer.appendChild(tipWindow);

            // è®°å½•å½“å‰çª—å£ä½ç½®ï¼Œç”¨äºåç»­é‡å æ£€æŸ¥
            existingWindows.push({ left: newLeft, top: newTop });
            i++; // åªæœ‰åˆ›å»ºæˆåŠŸæ‰è®¡æ•°ï¼Œé¿å…æ— é™å¾ªç¯

            // æ§åˆ¶åˆ›å»ºé€Ÿåº¦ï¼ˆæ‰‹æœºä¸Šæ›´æ…¢ï¼Œé¿å…å¡é¡¿ï¼‰
            if (i < windowCount) {
                awaitSleep(50);
            }
        }
    }

    // 3. 2ç§’åå¼€å§‹å…³é—­çª—å£
    setTimeout(() => {
        closeWindowsOneByOne(0);
    }, 2000);
}

        /**
         * é€ä¸ªå…³é—­çª—å£
         * å®Œå…¨å¯¹åº”Pythonä¸­çš„close_windows_one_by_oneå‡½æ•°
         */
        function closeWindowsOneByOne(index) {
            const allWindows = document.querySelectorAll('.tip-window'); // è·å–æ‰€æœ‰çª—å£
            if (index < allWindows.length) {
                allWindows[index].style.opacity = '0'; // æ·¡å‡ºæ•ˆæœï¼ˆå¯¹åº”Pythonä¸­çš„window.destroy()ï¼‰
                setTimeout(() => closeWindowsOneByOne(index + 1), 30); // é€’å½’å…³é—­ä¸‹ä¸€ä¸ª
            } else {
                finalPage.style.display = 'flex'; // æ˜¾ç¤ºç»“æŸé¡µï¼ˆå¯¹åº”Pythonä¸­çš„create_final_windowï¼‰
            }
        }

        /**
         * ä¼‘çœ å‡½æ•°
         * å¯¹åº”Pythonä¸­çš„time.sleepå‡½æ•°
         */
        function awaitSleep(ms) {
            const start = Date.now();
            while (Date.now() - start < ms) {}
        }
    </script>
</body>
</html>